# Medical Scribe ‚Äî Walkthrough

## O que foi constru√≠do

Aplica√ß√£o web completa de **Scribe M√©dico** multiplataforma (UBS, PS, UTI, Consult√≥rio) com 9 arquivos em `C:\Users\Usu√°rio\.gemini\antigravity\scratch\medical-scribe\`.

## Arquitetura

```mermaid
graph LR
    A[üé§ Grava√ß√£o/Texto] --> B[üîí LGPD]
    B --> C[üß† SOAP Engine]
    C --> D[üìã Revis√£o SOAP]
    C --> E[üìù Documentos]
    C --> F[üìä BI Dashboard]
    E --> G[‚úÖ Valida√ß√£o M√©dica]
    G --> H[üìÑ PDF / üìã Clipboard]
```

## Fluxo de Uso

### 1. Grava√ß√£o (tela inicial)
- Bot√£o central pulsante com grava√ß√£o por **Web Speech API** (Chrome)
- **Fallback**: campo de texto para digitar/colar transcri√ß√£o
- Bot√£o "üìã Usar Exemplo" para testar com consulta demo

### 2. Dados do Paciente
| Campo | Regra LGPD |
|-------|-----------|
| Nome Completo | Convertido para iniciais (J.O.S.) ‚Äî **original nunca √© armazenado** |
| Idade | Mantida |
| Cen√°rio | UBS, PS, UTI ou Consult√≥rio |

### 3. Processamento SOAP
O [soap-engine.js](file:///C:/Users/Usu√°rio/.gemini/antigravity/scratch/medical-scribe/js/soap-engine.js) faz:
- **Diariza√ß√£o** simulada: separa falas de m√©dico vs paciente
- Estrutura√ß√£o **SOAP** (Subjetivo, Objetivo, Avalia√ß√£o, Plano)
- Extra√ß√£o do JSON Universal: `HDA_Tecnica`, `Comorbidades`, `Alergias` (CAIXA ALTA), `Medica√ß√µes_Atuais`
- Detec√ß√£o autom√°tica de **CID-10** (~45 condi√ß√µes mapeadas)
- Estimativa de **gravidade** (Leve/Moderada/Grave)

### 4. Documentos Gerados
| Documento | Descri√ß√£o |
|-----------|-----------|
| üíä **Receitu√°rio** | Itens, doses, via, posologia e dura√ß√£o |
| üìÑ **Atestado** | CID-10, dias sugeridos por gravidade, texto padr√£o |
| üî¨ **Pedido de Exames** | Lista baseada na categoria CID, com checkboxes |
| ‚ù§Ô∏è **Guia Leiga** | Resumo em linguagem simples para o paciente |

Todos s√£o edit√°veis (contenteditable) e requerem **"‚úÖ Validado pelo M√©dico Assistente"** via modal confirma√ß√£o.

### 5. Dashboard BI
- 4 cards de KPIs (total atendimentos, graves, cen√°rios, CIDs √∫nicos)
- 4 gr√°ficos Chart.js (bar, doughnut, horizontal bar, line)
- Tabela dos √∫ltimos 15 registros
- Bot√£o "Carregar Dados Demo" (50 registros aleat√≥rios)

### 6. Exporta√ß√£o
- **üìã Clipboard**: individual ou "picotados" (todos juntos)
- **üìÑ PDF**: via html2pdf.js com cabe√ßalho timbrado e rodap√© LGPD
- PDFs s√≥ podem ser gerados **ap√≥s valida√ß√£o m√©dica**

## Como Testar

1. Abrir `index.html` no **Chrome** (melhor suporte a Speech API)
2. Clicar **"üìã Usar Exemplo"** para preencher com consulta demo
3. Clicar **"üß† Processar Consulta"**
4. Revisar cards SOAP na aba "Revis√£o SOAP"
5. Na aba "Documentos", **validar** cada documento e testar export
6. Na aba "Dashboard BI", carregar dados demo para ver gr√°ficos

## M√≥dulos Criados

| Arquivo | Tamanho | Fun√ß√£o |
|---------|---------|--------|
| [index.html](file:///C:/Users/Usu√°rio/.gemini/antigravity/scratch/medical-scribe/index.html) | 12KB | SPA shell (4 se√ß√µes) |
| [styles.css](file:///C:/Users/Usu√°rio/.gemini/antigravity/scratch/medical-scribe/css/styles.css) | CSS | Dark mode + glassmorphism |
| [app.js](file:///C:/Users/Usu√°rio/.gemini/antigravity/scratch/medical-scribe/js/app.js) | 23KB | Controlador principal |
| [soap-engine.js](file:///C:/Users/Usu√°rio/.gemini/antigravity/scratch/medical-scribe/js/soap-engine.js) | 13KB | Motor SOAP + diariza√ß√£o |
| [bi-module.js](file:///C:/Users/Usu√°rio/.gemini/antigravity/scratch/medical-scribe/js/bi-module.js) | 13KB | Dashboards Chart.js |
| [export.js](file:///C:/Users/Usu√°rio/.gemini/antigravity/scratch/medical-scribe/js/export.js) | 11KB | Clipboard + PDF |
| [documents.js](file:///C:/Users/Usu√°rio/.gemini/antigravity/scratch/medical-scribe/js/documents.js) | 9KB | Gerador de documentos |
| [db.js](file:///C:/Users/Usu√°rio/.gemini/antigravity/scratch/medical-scribe/js/db.js) | 6KB | IndexedDB wrapper |
| [lgpd.js](file:///C:/Users/Usu√°rio/.gemini/antigravity/scratch/medical-scribe/js/lgpd.js) | 3KB | Anonimiza√ß√£o LGPD |
| [recorder.js](file:///C:/Users/Usu√°rio/.gemini/antigravity/scratch/medical-scribe/js/recorder.js) | 4KB | Speech-to-Text |
